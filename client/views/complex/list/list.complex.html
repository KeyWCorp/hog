<section id="List">

  <div layout="row" layout-align="end center">
    <md-autocomplete
                    ng-disabled="vm.isDisabled"
                    md-no-cache="vm.noCache"
                    md-selected-item="vm.selectedItem"
                    md-search-text-change="vm.searchTextChange(vm.searchText)"
                    md-search-text="vm.searchText"
                    md-selected-item-change="vm.selectedItemChange(item)"
                    md-items="item in vm.querySearch(vm.searchText)"
                    md-item-text="item.name"
                    md-min-length="0"
                    placeholder="Filter">
      <md-item-template>
        <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
      </md-item-template>
    </md-autocomplete>
  </div>
  <div class='md-padding' layout="column" layout-align="center center" >
    <md-card ng-model="vm.scripts" flex ng-repeat="pig in vm.scripts track by $index">
      <v-accordion class="vAccordion--default">
        <v-pane   style="width:900px" >
          <v-pane-header>
            <md-card-header>
              <div
                layout="row"
                layout-padding
                style="background-color:#e3e3e3; height: 40px"
                layout-align="start center">

                <h4>{{pig.name}}</h4>
                <div layout-align="start center">
                  <md-progress-circular
                    md-diameter="20px"
                    ng-show="vm.isRunning[pig._id] && vm.running"
                    md-mode="determinate"
                    value="{{pig.progress}}"
                    class="md-accent md-hue-4">
                  </md-progress-circular>
                </div>
              </div>
            </md-card-header>
          </v-pane-header>
          <v-pane-content>
            <md-card-content>
              <md-card ng-hide="pig.logs.length == 0 || pig.output.length > 0">
                <md-card-header >
                  Logs:
                  <ng-md-icon class="pull-right" icon="open_in_new" ng-click="openLog()"></ng-md-icon>
                </md-card-header>
                <md-card-content>
                  <md-content style="height: 100px">
                    <div ng-repeat="log in pig.logs track by $index">
                      {{log}}
                      <md-divider></md-divider>
                    </div>
                  </md-content>
                </md-card-content>
              </md-card>
              <md-card ng-show="pig.output.length > 0">
                <md-card-header >
                  Output:
                  <ng-md-icon  ng-disable="true" class="pull-right" icon="open_in_new" lass="md-primary md-raised" ng-click="vm.showTabDialog($event, pig._id )">
                  </ng-md-icon>
                </md-card-header>
                <md-card-content>
                  <md-content style="height: 100px">
                    {{pig.output}}
                  </md-content>
                </md-card-content>
              </md-card>
              <md-card ng-show="pig.data" ng-hide="pig.logs.length > 0" ng-hide="pig.output.length >0">
                <md-card-content>
                  <md-content style="height: 100px">
                    {{pig.data}}
                  </md-content>
                </md-card-content>
              </md-card>
            </md-card-content>
          </v-pane-content>

          <div class="md-actions" layout="row" layout-align="end center">
            <md-button class="md-primary md-raised" ng-disabled='vm.running' ng-click="vm.run(pig._id, $index)">
              Run
            </md-button>
            <md-button class="md-primary md-raised" ng-click="vm.edit(pig._id)">
              Edit
            </md-button>
          </div>
        </v-pane>
      </v-accordion>
    </md-card>
  </div>
</section>
