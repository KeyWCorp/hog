<section id="List">

  <div layout="row" layout-align="end center">
    <md-autocomplete
                    ng-disabled="vm.isDisabled"
                    md-no-cache="vm.noCache"
                    md-selected-item="vm.selectedItem"
                    md-search-text-change="vm.searchTextChange(vm.searchText)"
                    md-search-text="vm.searchText"
                    md-selected-item-change="vm.selectedItemChange(item)"
                    md-items="item in vm.querySearch(vm.searchText)"
                    md-item-text="item.name"
                    md-min-length="0"
                    placeholder="Filter">
      <md-item-template>
        <span md-highlight-text="ctrl.searchText" md-highlight-flags="^i">{{item.display}}</span>
      </md-item-template>
    </md-autocomplete>
  </div>
  <div class='md-padding' layout="column" layout-align="center center" >
    <md-card ng-model="vm.scripts" flex ng-repeat="pig in vm.scripts track by $index">
      <v-accordion class="vAccordion--default">
        <v-pane   style="width:900px" >
          <v-pane-header>
            <md-card-header>
              <div
                layout="row"
                layout-padding
                style="background-color:#e3e3e3; height: 40px"
                layout-align="start center">

                <h4>{{pig.name}}</h4>
                <div layout-align="start center">
                  <md-progress-circular
                    md-diameter="20px"
                    ng-show="vm.isRunning[pig._id] && vm.running"
                    md-mode="determinate"
                    value="{{pig.progress}}"
                    class="md-accent md-hue-4">
                  </md-progress-circular>
                </div>
              </div>
            </md-card-header>
          </v-pane-header>
          <v-pane-content>
            <md-card-content>
              <md-card ng-show="pig.data">
                <md-card-content>
                  <md-content style="height: 100px">
                    {{pig.data}}
                  </md-content>
                </md-card-content>
              </md-card>
            </md-card-content>
          </v-pane-content>

          <div class="md-actions" layout="row" layout-align="start center">
            <div layout="column" layout-align="start center" flex ng-if="pig.info_outputs.length > 0">
              <section layout="row">
                <md-button class="md-raised chip-btn" ng-click="vm.openInfo($event, $index, 'all')" ng-if="pig.info_outputs.length > 0">
                  Show All: #{{ pig.info_outputs.length }}
                  <md-tooltip>
                    Show All Logs
                  </md-tooltip>
                </md-button>

                <md-button class="md-raised chip-btn" ng-click="vm.openInfo($event, $index, 'output')" md-style-color="{'background-color': 'green.400'}" ng-if="pig.outputs.length > 0">
                  Show Outputs: #{{ pig.outputs.length }}
                  <md-tooltip>
                    Show Output
                  </md-tooltip>
                </md-button>

                <md-button class="md-raised chip-btn" ng-click="vm.openInfo($event, $index, 'log')" md-style-color="{'background-color': 'blue.400'}" ng-if="pig.logs.length > 0">
                  Show Logs: #{{ pig.logs.length }}
                  <md-tooltip>
                    Show Logs
                  </md-tooltip>
                </md-button>

                <md-button class="md-raised chip-btn" ng-click="vm.openInfo($event, $index, 'warning')" md-style-color="{'background-color': 'orange.400'}" ng-if="pig.warnings.length > 0">
                  Show Warnings: #{{ pig.warnings.length }}
                  <md-tooltip>
                    Show Warning Logs
                  </md-tooltip>
                </md-button>

                <md-button class="md-raised chip-btn" ng-click="vm.openInfo($event, $index, 'error')" md-style-color="{'background-color': 'red.400'}" ng-if="pig.errors.length > 0">
                  Show Errors: #{{ pig.errors.length }}
                  <md-tooltip>
                    Show Error Logs
                  </md-tooltip>
                </md-button>

                <md-divider ></md-divider>
              </section>
            </div>
            <div layout="row" layout-align="end center" flex>
              <md-button class="md-primary md-raised" ng-disabled='vm.running' ng-click="vm.run(pig._id, $index)">
                Run
              </md-button>
              <md-button class="md-primary md-raised" ng-click="vm.edit(pig._id)">
                Edit
              </md-button>
            </div>
          </div>
        </v-pane>
      </v-accordion>
    </md-card>
  </div>
</section>
